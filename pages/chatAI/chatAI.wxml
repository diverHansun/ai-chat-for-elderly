<scroll-view 
  class="chat-container" 
  scroll-y="true" 
  scroll-with-animation="true" 
  scroll-into-view="{{toView}}">
  
  <block wx:for="{{chatHistory}}" wx:key="index">
    <view class="message-item {{item.userType == 'user' ? 'user-message' : 'ai-message'}}" id="msg{{index}}">
      <!-- 头像 -->
      <image class="avatar" src="{{item.avatar}}" mode="aspectFill" />
      <!-- 消息内容 -->
      <view class="message-content">
        <!-- 用户消息 -->
        <block wx:if="{{item.userType == 'user'}}">
          <text>{{item.content}}</text>
        </block>
        <!-- AI 消息使用 rich-text 渲染 -->
        <block wx:elif="{{item.userType == 'ai'}}">
          <rich-text nodes="{{item.content}}"></rich-text>
        </block>
      </view>
    </view>
  </block>
  
  <!-- 滚动锚点备用 -->
  <view id="bottom"></view>
</scroll-view>

<view class="input-container">
  <input 
    class="input-box" 
    bindinput="handleInput" 
    value="{{inputValue}}" 
    placeholder="想和健康助手聊些什么..." />
  <button bindtap="sendMessage">发送</button>
</view>
